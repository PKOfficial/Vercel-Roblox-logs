<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LavaScript - Roblox Execution Tracker</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --purple-dark: #2a0845;
            --purple-medium: #4b2e83;
            --purple-light: #7b4bff;
            --blue-dark: #0f0c29;
            --blue-medium: #302b63;
            --blue-light: #24243e;
            --black: #0a0a0a;
            --white: #f8f9fa;
            --glow: 0 0 10px rgba(123, 75, 255, 0.7);
        }

        body {
            background: linear-gradient(135deg, var(--black), var(--blue-dark));
            color: var(--white);
            min-height: 100vh;
            overflow-x: hidden;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .glow-text {
            text-shadow: var(--glow);
            color: var(--white);
        }

        .bg-purple {
            background-color: var(--purple-medium) !important;
        }

        .bg-blue {
            background-color: var(--blue-medium) !important;
        }

        .bg-dark {
            background-color: var(--black) !important;
        }

        .text-purple {
            color: var(--purple-light) !important;
        }

        .text-blue {
            color: #64b5f6 !important;
        }

        .alert-purple {
            background-color: rgba(75, 46, 131, 0.3);
            border-color: var(--purple-light);
            color: var(--white);
        }

        .glass-card {
            background: rgba(10, 10, 10, 0.7);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(123, 75, 255, 0.2);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .glass-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px 0 rgba(123, 75, 255, 0.3);
        }

        .table-dark {
            background-color: rgba(10, 10, 10, 0.7) !important;
            color: var(--white);
        }

        .table-hover tbody tr:hover {
            background-color: rgba(123, 75, 255, 0.1) !important;
        }

        .code-block {
            border-left: 3px solid var(--purple-light);
        }

        .btn-purple {
            background-color: var(--purple-medium);
            color: white;
            border: none;
        }

        .btn-purple:hover {
            background-color: var(--purple-light);
            color: white;
        }

        .content-wrapper {
            position: relative;
            z-index: 10;
        }

        /* Lava Lamp CSS */
        .lava-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            overflow: hidden;
        }

        .lava-lamp {
            position: absolute;
            width: 300px;
            height: 500px;
            bottom: -150px;
            right: -50px;
            opacity: 0.2;
        }

        .lava {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(to top, var(--purple-dark), var(--purple-light));
            border-radius: 50% 50% 20% 20%;
            filter: blur(30px);
            animation: lava-flow 15s ease-in-out infinite;
        }

        .blob {
            position: absolute;
            background: rgba(123, 75, 255, 0.6);
            border-radius: 50%;
            filter: blur(20px);
            animation: blob-float 8s ease-in-out infinite;
        }

        .blob.top {
            width: 100px;
            height: 100px;
            top: 50px;
            left: 50px;
            animation-delay: 0.5s;
        }

        .blob.bottom {
            width: 150px;
            height: 150px;
            bottom: 50px;
            right: 50px;
            animation-delay: 1s;
        }

        @keyframes lava-flow {
            0%, 100% {
                transform: skew(0deg, 0deg);
                border-radius: 50% 50% 20% 20%;
            }
            25% {
                transform: skew(2deg, 2deg);
                border-radius: 60% 40% 30% 20%;
            }
            50% {
                transform: skew(0deg, -2deg);
                border-radius: 40% 60% 20% 30%;
            }
            75% {
                transform: skew(-2deg, 0deg);
                border-radius: 50% 50% 30% 30%;
            }
        }

        @keyframes blob-float {
            0%, 100% {
                transform: translate(0, 0);
            }
            25% {
                transform: translate(20px, -30px);
            }
            50% {
                transform: translate(-20px, 20px);
            }
            75% {
                transform: translate(30px, 10px);
            }
        }

        /* Particle effects */
        .particle {
            position: absolute;
            background: rgba(123, 75, 255, 0.5);
            border-radius: 50%;
            pointer-events: none;
        }

        /* Animations */
        @keyframes float {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        .floating {
            animation: float 3s ease-in-out infinite;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--black);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--purple-medium);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--purple-light);
        }
    </style>
</head>
<body>
    <!-- Lava lamp bubbles -->
    <div class="lava-container">
        <div class="lava-lamp">
            <div class="lava"></div>
            <div class="blob top"></div>
            <div class="blob bottom"></div>
        </div>
    </div>

    <!-- Main content -->
    <div class="container-fluid content-wrapper">
        <nav class="navbar navbar-expand-lg navbar-dark bg-transparent">
            <div class="container">
                <a class="navbar-brand glow-text" href="/">
                    <i class="fas fa-fire"></i> LavaScript
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link active" href="/">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#api">API</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <div class="container mt-5">
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="card glass-card animate__animated animate__fadeIn">
                        <div class="card-header bg-transparent">
                            <h3 class="text-center glow-text"><i class="fas fa-users"></i> Roblox User Execution Tracker</h3>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-dark table-hover">
                                    <thead>
                                        <tr>
                                            <th><i class="fas fa-user"></i> Username</th>
                                            <th><i class="fas fa-fingerprint"></i> HWID</th>
                                            <th><i class="fas fa-play"></i> Executions</th>
                                            <th><i class="fas fa-code"></i> Executor</th>
                                            <th><i class="fas fa-gamepad"></i> Game</th>
                                            <th><i class="fas fa-clock"></i> Last Execution</th>
                                        </tr>
                                    </thead>
                                    <tbody id="usersTable">
                                        <!-- Data will be loaded via JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row mt-4 justify-content-center">
                <div class="col-lg-6">
                    <div class="card glass-card animate__animated animate__fadeIn animate__delay-1s">
                        <div class="card-header bg-transparent">
                            <h4 class="text-center glow-text"><i class="fas fa-chart-pie"></i> Execution Statistics</h4>
                        </div>
                        <div class="card-body">
                            <canvas id="executionsChart"></canvas>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="card glass-card animate__animated animate__fadeIn animate__delay-2s">
                        <div class="card-header bg-transparent">
                            <h4 class="text-center glow-text"><i class="fas fa-info-circle"></i> Quick Info</h4>
                        </div>
                        <div class="card-body">
                            <div class="d-flex justify-content-between mb-3">
                                <span><i class="fas fa-users"></i> Total Users:</span>
                                <span id="totalUsers" class="badge bg-purple">0</span>
                            </div>
                            <div class="d-flex justify-content-between mb-3">
                                <span><i class="fas fa-play"></i> Total Executions:</span>
                                <span id="totalExecutions" class="badge bg-blue">0</span>
                            </div>
                            <div class="d-flex justify-content-between mb-3">
                                <span><i class="fas fa-user-shield"></i> Most Active User:</span>
                                <span id="mostActive" class="badge bg-dark">None</span>
                            </div>
                            <div class="d-flex justify-content-between">
                                <span><i class="fas fa-clock"></i> Last Updated:</span>
                                <span id="lastUpdated" class="badge bg-dark">Never</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- API Section -->
            <div class="row mt-5 justify-content-center" id="api">
                <div class="col-lg-10">
                    <div class="card glass-card animate__animated animate__fadeIn">
                        <div class="card-header bg-transparent">
                            <h3 class="text-center glow-text"><i class="fas fa-code"></i> API Documentation</h3>
                        </div>
                        <div class="card-body">
                            <h4 class="text-purple"><i class="fas fa-exchange-alt"></i> Endpoints</h4>
                            <hr class="bg-blue">
                            
                            <div class="mb-4">
                                <h5 class="text-blue">1. Log Execution</h5>
                                <p>Log a new script execution from a Roblox user.</p>
                                <div class="code-block bg-dark p-3 rounded">
                                    <p class="text-muted mb-1">POST /api/log_execution</p>
                                    <pre class="text-white mb-2">Required JSON:
{
    "roblox_username": "string",
    "hwid": "string (optional)",
    "executor": "string (optional)",
    "game_name": "string (optional)"
}</pre>
                                    <p class="text-success">Returns: JSON with all users data</p>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <h5 class="text-blue">2. Get All Users</h5>
                                <p>Retrieve all users with their execution data.</p>
                                <div class="code-block bg-dark p-3 rounded">
                                    <p class="text-muted mb-1">GET /api/get_users</p>
                                    <p class="text-success">Returns: JSON array of all users</p>
                                </div>
                            </div>
                            
                            <h4 class="text-purple mt-5"><i class="fas fa-laptop-code"></i> Example Usage</h4>
                            <hr class="bg-blue">
                            
                            <div class="code-block bg-dark p-3 rounded mb-3">
                                <p class="text-blue">Roblox Lua Example:</p>
                                <pre class="text-white">local HttpService = game:GetService("HttpService")

local url = "http://your-website.com/api/log_execution"
local data = {
    roblox_username = game.Players.LocalPlayer.Name,
    hwid = "unique-hwid-here",
    executor = "ExecutorName",
    game_name = game:GetService("MarketplaceService"):GetProductInfo(game.PlaceId).Name
}

local success, response = pcall(function()
    return HttpService:PostAsync(url, HttpService:JSONEncode(data))
end)

if success then
    print("Execution logged successfully!")
else
    warn("Failed to log execution: " .. response)
end</pre>
                            </div>
                            
                            <div class="alert alert-purple mt-4">
                                <i class="fas fa-key"></i> <strong>Note:</strong> Make sure to handle errors properly in your implementation.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Initialize particles
        function initParticles() {
            const container = document.querySelector('.lava-container');
            const particleCount = 20;
            
            for (let i = 0; i < particleCount; i++) {
                createParticle(container);
            }
        }

        function createParticle(container) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            
            // Random size between 2px and 6px
            const size = Math.random() * 4 + 2;
            particle.style.width = `${size}px`;
            particle.style.height = `${size}px`;
            
            // Random position
            particle.style.left = `${Math.random() * 100}vw`;
            particle.style.top = `${Math.random() * 100}vh`;
            
            // Random animation
            const duration = Math.random() * 20 + 10;
            const delay = Math.random() * 5;
            particle.style.animation = `float ${duration}s linear ${delay}s infinite`;
            
            container.appendChild(particle);
            
            // Float animation
            const keyframes = `
                @keyframes float {
                    0% {
                        transform: translate(0, 0);
                        opacity: 0;
                    }
                    10% {
                        opacity: 0.5;
                    }
                    90% {
                        opacity: 0.5;
                    }
                    100% {
                        transform: translate(${Math.random() * 200 - 100}px, ${Math.random() * 200 - 100}px);
                        opacity: 0;
                    }
                }
            `;
            
            const style = document.createElement('style');
            style.innerHTML = keyframes;
            document.head.appendChild(style);
        }

        // Main functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Load user data
            fetch('/api/get_users')
                .then(response => response.json())
                .then(data => {
                    updateUserTable(data);
                    updateStats(data);
                    createChart(data);
                })
                .catch(error => console.error('Error:', error));

            // Auto-refresh every 30 seconds
            setInterval(() => {
                fetch('/api/get_users')
                    .then(response => response.json())
                    .then(data => {
                        updateUserTable(data);
                        updateStats(data);
                    })
                    .catch(error => console.error('Error:', error));
            }, 30000);

            // Initialize particles
            initParticles();
        });

        function updateUserTable(users) {
            const tableBody = document.getElementById('usersTable');
            tableBody.innerHTML = '';
            
            users.forEach(user => {
                const row = document.createElement('tr');
                row.className = 'animate__animated animate__fadeIn';
                
                row.innerHTML = `
                    <td>${user.roblox_username}</td>
                    <td class="text-muted">${user.hwid}</td>
                    <td><span class="badge bg-purple">${user.executions}</span></td>
                    <td>${user.executor}</td>
                    <td>${user.game_name}</td>
                    <td>${new Date(user.last_execution).toLocaleString()}</td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function updateStats(users) {
            document.getElementById('totalUsers').textContent = users.length;
            
            const totalExecutions = users.reduce((sum, user) => sum + user.executions, 0);
            document.getElementById('totalExecutions').textContent = totalExecutions;
            
            if (users.length > 0) {
                const mostActive = users.reduce((prev, current) => 
                    (prev.executions > current.executions) ? prev : current
                );
                document.getElementById('mostActive').textContent = mostActive.roblox_username;
            }
            
            document.getElementById('lastUpdated').textContent = new Date().toLocaleTimeString();
        }

        function createChart(users) {
            const ctx = document.getElementById('executionsChart').getContext('2d');
            
            // Prepare data for chart
            const labels = users.map(user => user.roblox_username);
            const data = users.map(user => user.executions);
            const backgroundColors = Array.from({length: users.length}, (_, i) => 
                `hsl(${(i * 30) % 360}, 70%, 50%)`
            );
            
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: backgroundColors,
                        borderColor: 'rgba(10, 10, 10, 0.8)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: {
                                color: '#f8f9fa',
                                font: {
                                    size: 12
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.label}: ${context.raw} executions`;
                                }
                            }
                        }
                    },
                    cutout: '70%',
                    animation: {
                        animateScale: true,
                        animateRotate: true
                    }
                }
            });
        }
    </script>
</body>
</html>